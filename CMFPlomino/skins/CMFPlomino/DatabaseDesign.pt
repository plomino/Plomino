<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en"
      lang="en"
      metal:use-macro="here/main_template/macros/master"
      i18n:domain="plone">

<body>

    <div metal:fill-slot="main">
    <metal:main-macro define-macro="main">

        <div metal:use-macro="here/document_actions/macros/document_actions">
            Document actions (print, sendto etc)
        </div>

        <h1 class="documentFirstHeading">
            <tal:block tal:content="object_title">Title or id</tal:block> design
        </h1>

        <a href=""
           class="link-parent"
           tal:define="parent_url python:here.navigationParent(here, template_id)"
           tal:condition="parent_url"
           tal:attributes="href parent_url"
           i18n:translate="go_to_parent_url">
        Up one level
        </a>

        <div class="documentDescription" tal:content="here/Description">
            description
        </div>
      <dl class="collapsible inline collapsedOnLoad">
        <dt class="collapsibleHeader">Forms</dt>
        <dd class="collapsibleContent">
			<ul>
			<tal:block tal:repeat="f python:here.getForms()">
				<li>
					<tal:block tal:content="f/id">form id</tal:block>
					<a tal:attributes="href python:f.absolute_url_path()+'/base_edit'"><img src="edit.gif" /></a>
					<a tal:attributes="href python:f.absolute_url_path()+'/base_view'"><img src="document_icon.gif" /></a>
					<a tal:attributes="href python:f.absolute_url_path()+'/folder_contents'"><img src="folder_icon.gif" /></a>
					<!--Fields list-->
							<ul>
													
								
								<li>
									Fields : 
								</li>
								<tal:fieldsforms tal:repeat="fields python:f.getFields()">
								<ul>
									
									<li>
									<tal:block tal:content="fields/id">Field name</tal:block>
									<a href="" tal:attributes="href python:fields.absolute_url_path()+'/base_edit'"><img src="edit.gif" /></a>
									<a href="" tal:attributes="href python:fields.absolute_url_path()+'/base_view'"><img src="document_icon.gif" /></a>
									</li>
								
								</ul>
								</tal:fieldsforms>
								<!--Form actions-->
								<li>
									Actions : 
								</li>
								<ul>
									<tal:actionsforms tal:repeat="action python:f.getActions(None, False)">
										<li>
										<tal:block tal:content="action/id">action name</tal:block>
										<a href="" tal:attributes="href python:action.absolute_url()+'/base_edit'"><img src="edit.gif" /></a>
										<a href="" tal:attributes="href python:action.absolute_url()+'/base_view'"><img src="document_icon.gif" /></a>
										</li>
									</tal:actionsforms>
								</ul>
								
							</ul>
				</li>
			</tal:block>
			</ul>
</dd></dl><br/>
      <dl class="collapsible inline collapsedOnLoad">
        <dt class="collapsibleHeader">Views</dt>
        <dd class="collapsibleContent">
			<ul>
			<tal:blockviews tal:repeat="view python:here.getViews()">
				<li>
					<tal:block tal:content="view/id">view name</tal:block>
					<a tal:attributes="href python:view.absolute_url_path()+'/base_edit'"><img src="edit.gif" /></a>
					<a tal:attributes="href python:view.absolute_url_path()+'/base_view'"><img src="document_icon.gif" /></a>
					<a tal:attributes="href python:view.absolute_url_path()+'/folder_contents'"><img src="folder_icon.gif" /></a>
							<!--View columns-->
							<ul>
								<li>
									Columns : 
								</li>
								<ul>
									<tal:colonnesviews tal:repeat="colonne python:view.getColumns()">
									<li>
									<tal:block tal:content="python:colonne.getColumnName()">column name</tal:block>
										<a href="" tal:attributes="href python:colonne.absolute_url()+'/base_edit'"><img src="edit.gif" /></a>
										<a href="" tal:attributes="href python:colonne.absolute_url()+'/base_view'"><img src="document_icon.gif" /></a>
									</li>
								</tal:colonnesviews>
								</ul>
								<!--View actions-->
								<li>
									Actions : 
								</li>
								<ul>
									<tal:actionsviews tal:repeat="action python:view.getActions(None, False)">
										<li>
										<tal:block tal:content="action/id">action name</tal:block>
										<a href="" tal:attributes="href python:action.absolute_url()+'/base_edit'"><img src="edit.gif" /></a>
										<a href="" tal:attributes="href python:action.absolute_url()+'/base_view'"><img src="document_icon.gif" /></a>
										</li>
									</tal:actionsviews>
								</ul>
							
							</ul>
						
				</li>
			</tal:blockviews>
			</ul>
</dd></dl><br/>
<dl class="collapsible inline collapsedOnLoad">
        <dt class="collapsibleHeader">Agents</dt>
        <dd class="collapsibleContent">
			<ul>
			<tal:blockagents tal:repeat="agent python:here.getAgents()">
			<li>
				<tal:block tal:content="agent/id">agent name</tal:block>
				<a href="" tal:attributes="href python:agent.absolute_url()+'/base_edit'"><img src="edit.gif" /></a>
			</li>
			</tal:blockagents>
			</ul>
</dd></dl><br/>
      <dl class="collapsible inline collapsedOnLoad">
        <dt class="collapsibleHeader">Others</dt>
        <dd class="collapsibleContent">
			<ul><li><a href="./resources/manage_main" target="_new">Resources folder (ZMI)</a></li>
				<li><a href="./plomino_index/manage_catalogView" target="_new">Index (ZMI)</a></li>
				<li><a href="./refreshDB">Refresh database</a></li>		
			</ul>
</dd></dl>



		
<hr/><h3>Import/Export design</h3>
<table>
<tr><th>Import</th><th>Export</th></tr>
<tr><td valign="top">
	<form name="ImportDesign" action="importDesign" method="POST">
	<imput type="hidden" name="mode" value="refresh" />
		<table tal:define="sourceURL request/sourceURL|nothing;
						username request/username|nothing;
						password request/password|nothing">
			<tr>
				<td>Source URL</td>
				<td><input type="text" name="sourceURL" 
					tal:attributes="value sourceURL"
					/></td>
			</tr>
			<tr>
				<td>Username</td>
				<td><input type="text" name="username" tal:attributes="value username"/></td>
			</tr>
			<tr>
				<td>Password</td>
				<td><input type="password" name="password" tal:attributes="value password"/></td>
			</tr>
			<tr>
				<td>Elements</td>
				<td>
				<select name="designelements" multiple="true" lines="6">
					<tal:block tal:condition="sourceURL">
						<tal:block tal:repeat="f python:here.getRemoteForms(sourceURL, username, password)">
							<option tal:attributes="value f;"
								tal:content="python:f+' (Form)'">value</option>
						</tal:block>
						<tal:block tal:repeat="v python:here.getRemoteViews(sourceURL, username, password)">
							<option tal:attributes="value v;"
								tal:content="python:v+' (View)'">value</option>
						</tal:block>
						<tal:block tal:repeat="v python:here.getRemoteResources(sourceURL, username, password)">
							<option tal:attributes="value v;"
								tal:content="python:v+' (Resource)'">value</option>
						</tal:block>
					</tal:block>
				</select>
				<input type="submit" name="submit_refresh" class="context" value="Refresh"/>
				</td>
			</tr>
			<tr><td><input type="submit" class="context" value="Import" name="submit_import"/></td><td></td></tr>
		</table>
	</form>
</td>
<td valign="top">
	<form name="ExportDesign" action="exportDesign" method="POST">
		<table>
			<tr>
				<td>Target URL</td>
				<td><input type="text" name="targetURL"/></td>
			</tr>
			<tr>
				<td>Username</td>
				<td><input type="text" name="username"/></td>
			</tr>
			<tr>
				<td>Password</td>
				<td><input type="password" name="password"/></td>
			</tr>
			<tr>
				<td>Elements</td>
				<td>
				<select name="designelements" multiple="true" lines="6">
					<tal:block tal:repeat="f python:here.getForms()">
						<option tal:attributes="value f/id;"
							tal:content="python:f.id+' (Form)'">value</option>
					</tal:block>
					<tal:block tal:repeat="v python:here.getViews()">
						<option tal:attributes="value v/id;"
							tal:content="python:v.id+' (View)'">value</option>
					</tal:block>
					<tal:block tal:repeat="v python:['resources/'+i for i in here.resources.objectIds()]">
						<option tal:attributes="value v;"
							tal:content="python:v+' (Resource)'">value</option>
					</tal:block>
				</select>
				</td>
			</tr>
			<tr><td><input type="submit" class="context" value="Export" name="submit_export"/></td><td></td></tr>
		</table>
	</form>
</tr>
</table>
    </metal:main-macro>
    </div>

</body>
</html>
