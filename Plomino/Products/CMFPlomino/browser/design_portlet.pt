<dl class="portlet portlet-plomino" tal:define="db python:view.parentdatabase();
                                                db_url python:db.absolute_url();
                                                type python:view.currenttype();
                                                url python:view.context.absolute_url();">
    <dt class="portletHeader"><a tal:attributes="href string:${db_url}/DatabaseDesign">Design</a></dt>
    <dd class="portletItem">
        <strong>Database</strong>
        <ul>
        <li><a tal:attributes="href string:${db_url}/edit">Parameters</a></li>
        <li><a tal:attributes="href string:${db_url}/DatabaseDesign">Design</a></li>
        <li><a tal:attributes="href string:${db_url}/DatabaseACL">Access control</a></li>
        </ul>
    </dd>
    <dd class="portletItem" tal:condition="python:type=='PlominoDatabase'">
        <strong>Add new...</strong>
        <ul>
        <li><a tal:attributes="href string:${url}/createObject?type_name=PlominoForm">Form</a></li>
        <li><a tal:attributes="href string:${url}/createObject?type_name=PlominoView">View</a></li>
        <li><a tal:attributes="href string:${url}/createObject?type_name=PlominoAgent">Agent</a></li>
        </ul>
    </dd>
    <dd class="portletItem" tal:condition="python:type=='PlominoForm'">
        <strong>Form</strong>
        <div>Add new...</div>
        <ul>
        <li><a tal:attributes="href string:${url}/createObject?type_name=PlominoField">Field</a></li>
        <li><a tal:attributes="href string:${url}/createObject?type_name=PlominoHidewhen">Hide when</a></li>
        <li><a tal:attributes="href string:${url}/createObject?type_name=PlominoAction">Action</a></li>
        </ul>
        <div>or</div>
        <a tal:attributes="href string:${url}/manage_generateView"
          title="Create a view based on the current form definition"
          >Generate view</a>

    </dd>
    <dd class="portletItem" tal:condition="python:type=='PlominoView'">
        <strong>View</strong>
        <div>Add new...</div>
         <ul>
        <li><a tal:attributes="href string:${url}/createObject?type_name=PlominoColumn">Column</a></li>
        <li><a tal:attributes="href string:${url}/createObject?type_name=PlominoAction">Action</a></li>
        </ul>
    </dd>
    <dd class="portletItem" tal:define="status python:db.getStatus();
                                        inprogress python:'%' in status">
        <strong>Status</strong><br/>
        <tal:ready tal:condition="not:inprogress" tal:content="status">status</tal:ready>
        <tal:inprogress tal:condition="inprogress">
            <tal:block tal:define="str_status python:status[:status.index('(')];
                                   progress python:status[status.index('(')+1:-1]">
                <tal:block tal:content="str_status">status</tal:block>
                <div style="border:1px solid blue; width: 100%"><div tal:attributes="style string:width:$progress;;background-color:blue">&nbsp;</div></div>
            </tal:block>
        </tal:inprogress>
    </dd>
</dl>