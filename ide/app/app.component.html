<div>
  <header class="mdl-layout__header mdl-layout__header--scroll">
    <div class="mdl-layout__header-row">
      <span class="mdl-layout-title">Plomino IDE</span>
      <div class="mdl-layout-spacer"></div>
      <nav class="mdl-navigation mdl-layout--large-screen-only">
        <a class="mdl-navigation__link" [href]="getPloneLink()">Close IDE</a>
        <a class="mdl-navigation__link" href="/Plone/logout">Logout</a>
      </nav>
    </div>
  </header>
  <div class="mdl-layout__drawer">
    <!--<span class="mdl-layout-title">Title</span>
    <nav class="mdl-navigation">
      <a class="mdl-navigation__link" href="">Link</a>
      <a class="mdl-navigation__link" href="">Link</a>
      <a class="mdl-navigation__link" href="">Link</a>
      <a class="mdl-navigation__link" href="">Link</a>
    </nav>-->
  </div>
  <main class="mdl-layout__content" style="width: 100%">
    <div class="page-content">
      <plomino-block-preloader [loading]="false"></plomino-block-preloader>
      
      <div class="wrap-app" style="height: calc(100vh - 64px);">
  
        <div class="well sidebar mdl-color--grey-50" style="height: 100%">

          <div class="palette-wrapper">
            <plomino-palette>
            </plomino-palette>
          </div>
          
          <div class="tree-wrapper">
            <plomino-resize-divider [listen]="[DIRECTION_DOWN, DIRECTION_UP]"
              (move)="resizeTree($event)"></plomino-resize-divider>
            <div class="content">
              <plomino-tree [data]="data" 
                            [selected]="selected" 
                            (add)="onAdd($event)">
              </plomino-tree>
            </div>
          </div>
        </div>

        <plomino-resize-divider
          [listen]="[DIRECTION_LEFT, DIRECTION_RIGHT]"
          [columnResize]="true"
          (move)="resizeColumns($event)"></plomino-resize-divider>
        
        <div class="main-app panel"  style="height: 100%; overflow-y: scroll">
          <div class="drop-zone-container"        
            *ngIf="isDragging && 
                  dragData !== null &&
                  (dragData['@type'] === 'PlominoForm' || 
                    dragData['@type'] === 'PlominoView')"
            dnd-droppable
            [allowDrop]="allowDrop()"
            (onDropSuccess)="dropped()">
            <div class="drop-zone-label">
              <p class="glyphicon glyphicon-download" 
                  aria-hidden="true">
              </p>
              <p class="heading">
                Drop Selected Item here
              </p>
            </div>
          </div>

          <!-- Tabs -->
          <plomino-tabs></plomino-tabs>
          
          <!--<tabset>
            <tab *ngFor="let tabz of tabs" 
                [heading]="" 
                [removable]="true" 
                [active]="tabz.active"
                (removed)="closeTab($event, tabz)"
                (select)="onTabSelect(tabz)">
              
              <template tabHeading>
                  <span class="tab-trigger" [class.tabunsaved]="tabz.isdirty"
                    [attr.data-editor]="tabz.editor"
                    [attr.id]="'tab_' + tabz.url"
                    [attr.data-url]="tabz.url" [attr.data-active]="tabz.active">
                    <loading *ngIf="tabz.isloading"></loading>
                    <span *ngIf="tabz.isdirty === true">* </span>
                    <span *ngIf="tabz.editor !== 'workflow'" class="tab-type-image">
                      <img [src]="getTabTypeImage(tabz.editor)">
                    </span>
                    <i style="position: relative; top: 4px;" 
                      *ngIf="tabz.editor === 'workflow'"
                      class="material-icons">work</i>
                    <span class="tab-name">{{tabz.url | extractName}}</span>
                  </span>
                  <div class="mdl-tooltip mdl-tooltip--large"
                    [attr.data-mdl-for]="'tab_' + tabz.url">
                    {{ tabz.title }}
                  </div>
              </template>
              
              <plomino-tiny-mce *ngIf="tabz.editor==='layout'" 
                  [id]="tabz.url"
                  [item]="tabz"
                  (isLoading)="tabz.isloading=$event"
                  (isDirty)="setTabzAsDirty(tabz, $event)"
                  (fieldSelected)="fieldSelected($event)">
              </plomino-tiny-mce>

              <plomino-workflow-editor *ngIf="tabz.editor==='workflow'" 
                  [id]="tabz.url"
                  [item]="tabz">
              </plomino-workflow-editor>

              <plomino-view-editor *ngIf="tabz.editor==='view'" 
                  [id]="tabz.url"
                  [item]="tabz"
                  (isLoading)="tabz.isloading=$event">
              </plomino-view-editor>
              
              <plomino-ace-editor *ngIf="tabz.editor==='code'" 
                  [url]="tabz.url" 
                  [path]="tabz.path" 
                  [aceNumber]="aceNumber" 
                  (isDirty)="tabz.isdirty=$event">
              </plomino-ace-editor>
            </tab>
          </tabset>-->
        </div>
      </div>

    </div>
  </main>
</div>
